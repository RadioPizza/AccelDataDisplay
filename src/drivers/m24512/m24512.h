/**
 * @file m24512.h
 * @brief Библиотека-драйвер для работы с EEPROM M24512
 * 
 * Этот файл содержит прототипы функций и необходимые определения 
 * для работы с микросхемой энергонезависимой памяти M24512 по интерфейсу I2C.
 * 
 * Основные характеристики M24512:
 * - Объем памяти: 512 Кбит (64 КБайт)
 * - Организация: 65536 x 8 бит
 * - Интерфейс: I2C (до 400 кГц)
 * - Напряжение питания: 2.5В - 5.5В
 * - Время записи страницы: 5 мс макс.
 */

#ifndef M24512_H
#define M24512_H

#include <stdint.h>

/** @defgroup M24512_Constants Константы для работы с M24512
 * @{
 */

/** @brief Базовый адрес устройства M24512 на шине I2C */
#define M24512_BASE_ADDR    0xA0

/** @brief Максимальный адрес памяти */
#define M24512_MAX_ADDR     0xFFFF

/** @brief Размер страницы памяти в байтах */
#define M24512_PAGE_SIZE    128

/** @} */

/** @defgroup M24512_Functions Функции для работы с M24512
 * @{
 */

/**
 * @brief Инициализация M24512
 * 
 * Выполняет проверку наличия и доступности микросхемы памяти на шине I2C.
 * Необходимо вызвать перед началом работы с микросхемой.
 * 
 * @return Результат инициализации
 * @retval 0 Инициализация выполнена успешно, устройство отвечает
 * @retval 1 Ошибка инициализации, устройство не отвечает
 */
uint8_t M24512_Init(void);

/**
 * @brief Запись байта данных по указанному адресу
 * 
 * Записывает один байт данных по указанному адресу памяти.
 * После записи автоматически выполняется ожидание завершения
 * внутреннего цикла записи микросхемы.
 * 
 * @param[in] addr Адрес для записи (0x0000 - 0xFFFF)
 * @param[in] data Байт данных для записи
 * 
 * @return Результат операции записи
 * @retval 0 Запись выполнена успешно
 * @retval 1 Ошибка записи или некорректный адрес
 */
uint8_t M24512_WriteByte(uint16_t addr, uint8_t data);

/**
 * @brief Чтение байта данных с указанного адреса
 * 
 * Читает один байт данных с указанного адреса памяти.
 * 
 * @param[in] addr Адрес для чтения (0x0000 - 0xFFFF)
 * @param[out] data Указатель на переменную для сохранения прочитанного байта
 * 
 * @return Результат операции чтения
 * @retval 0 Чтение выполнено успешно
 * @retval 1 Ошибка чтения, некорректный адрес или NULL указатель
 */
uint8_t M24512_ReadByte(uint16_t addr, uint8_t* data);

/** @} */

#endif /* M24512_H */